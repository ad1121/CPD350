<!DOCTYPE html>

<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Racha Cuca</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }


    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
    }

    .container {
        background: white;
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        max-width: 500px;
        width: 100%;
    }

    h1 {
        text-align: center;
        color: #333;
        margin-bottom: 20px;
        font-size: 2em;
    }

    .menu {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .difficulty-group {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .difficulty-group label {
        font-weight: 600;
        color: #555;
    }

    .difficulty-buttons {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .difficulty-btn {
        flex: 1;
        min-width: 80px;
        padding: 12px;
        border: 2px solid #667eea;
        background: white;
        color: #667eea;
        border-radius: 10px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        transition: all 0.3s;
    }

    .difficulty-btn:hover {
        background: #667eea;
        color: white;
        transform: translateY(-2px);
    }

    .difficulty-btn.active {
        background: #667eea;
        color: white;
    }

    .color-picker-group {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .color-picker-group label {
        font-weight: 600;
        color: #555;
    }

    .color-input {
        width: 100%;
        height: 50px;
        border: 2px solid #ddd;
        border-radius: 10px;
        cursor: pointer;
    }

    .start-btn {
        padding: 15px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.3s;
    }

    .start-btn:hover {
        transform: scale(1.05);
    }

    .game-screen {
        display: none;
    }

    .game-info {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 10px;
    }

    .info-item {
        text-align: center;
    }

    .info-label {
        font-size: 12px;
        color: #666;
        margin-bottom: 5px;
    }

    .info-value {
        font-size: 20px;
        font-weight: 700;
        color: #333;
    }

    .board {
        display: grid;
        gap: 8px;
        margin: 0 auto 20px;
        background: #e0e0e0;
        padding: 15px;
        border-radius: 15px;
        box-shadow: inset 0 4px 8px rgba(0,0,0,0.1);
    }

    .tile {
        aspect-ratio: 1;
        background: white;
        border-radius: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 24px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.2s;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        user-select: none;
    }

    .tile:hover {
        transform: scale(0.95);
    }

    .tile.empty {
        background: transparent;
        box-shadow: none;
        cursor: default;
    }

    .tile.empty:hover {
        transform: none;
    }

    .game-buttons {
        display: flex;
        gap: 10px;
    }

    .game-btn {
        flex: 1;
        padding: 12px;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
    }

    .reset-btn {
        background: #ff6b6b;
        color: white;
    }

    .reset-btn:hover {
        background: #ff5252;
    }

    .menu-btn {
        background: #667eea;
        color: white;
    }

    .menu-btn:hover {
        background: #5568d3;
    }

    .records {
        margin-top: 20px;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 10px;
    }

    .records h3 {
        margin-bottom: 10px;
        color: #333;
        font-size: 16px;
    }

    .record-list {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .record-item {
        display: flex;
        justify-content: space-between;
        padding: 8px 12px;
        background: white;
        border-radius: 8px;
        font-size: 14px;
    }

    .record-time {
        font-weight: 600;
        color: #667eea;
    }

    .win-message {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        text-align: center;
        z-index: 1000;
    }

    .win-message.show {
        display: block;
        animation: popup 0.5s ease-out;
    }

    @keyframes popup {
        0% {
            transform: translate(-50%, -50%) scale(0.5);
            opacity: 0;
        }
        100% {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }
    }

    .win-message h2 {
        color: #667eea;
        margin-bottom: 20px;
        font-size: 32px;
    }

    .win-message p {
        color: #666;
        margin-bottom: 30px;
        font-size: 18px;
    }

    .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 999;
    }

    .overlay.show {
        display: block;
    }
</style>


</head>
<body>
    <div class="container">
        <h1>üéÆ RACHA CUCA</h1>


    <div class="menu" id="menu">
        <div class="difficulty-group">
            <label>Escolha a Dificuldade:</label>
            <div class="difficulty-buttons">
                <button class="difficulty-btn active" data-difficulty="easy">F√°cil (3x3)</button>
                <button class="difficulty-btn" data-difficulty="medium">M√©dio (4x4)</button>
                <button class="difficulty-btn" data-difficulty="hard">Dif√≠cil (5x5)</button>
            </div>
        </div>

        <div class="color-picker-group">
            <label>Escolha a Cor dos N√∫meros:</label>
            <input type="color" class="color-input" id="colorPicker" value="#667eea">
        </div>

        <button class="start-btn" id="startBtn">‚ñ∂Ô∏è JOGAR</button>

        <div class="records" id="menuRecords">
            <h3>üèÜ √öltimos Tempos</h3>
            <div class="record-list" id="menuRecordList"></div>
        </div>
    </div>

    <div class="game-screen" id="gameScreen">
        <div class="game-info">
            <div class="info-item">
                <div class="info-label">Movimentos</div>
                <div class="info-value" id="moves">0</div>
            </div>
            <div class="info-item">
                <div class="info-label">Tempo</div>
                <div class="info-value" id="timer">00:00</div>
            </div>
        </div>

        <div class="board" id="board"></div>

        <div class="game-buttons">
            <button class="game-btn reset-btn" id="resetBtn">üîÑ Reiniciar</button>
            <button class="game-btn menu-btn" id="menuBtn">üè† Menu</button>
        </div>

        <div class="records">
            <h3>üèÜ √öltimos Tempos</h3>
            <div class="record-list" id="recordList"></div>
        </div>
    </div>
</div>

<div class="overlay" id="overlay"></div>
<div class="win-message" id="winMessage">
    <h2>üéâ Parab√©ns!</h2>
    <p id="winText"></p>
    <button class="start-btn" id="playAgainBtn">Jogar Novamente</button>
</div>

<script>
    let size = 3;
    let tiles = [];
    let emptyIndex = 0;
    let moves = 0;
    let seconds = 0;
    let timerInterval = null;
    let selectedColor = '#667eea';
    let difficulty = 'easy';

    const menu = document.getElementById('menu');
    const gameScreen = document.getElementById('gameScreen');
    const board = document.getElementById('board');
    const movesEl = document.getElementById('moves');
    const timerEl = document.getElementById('timer');
    const startBtn = document.getElementById('startBtn');
    const resetBtn = document.getElementById('resetBtn');
    const menuBtn = document.getElementById('menuBtn');
    const colorPicker = document.getElementById('colorPicker');
    const difficultyBtns = document.querySelectorAll('.difficulty-btn');
    const winMessage = document.getElementById('winMessage');
    const winText = document.getElementById('winText');
    const playAgainBtn = document.getElementById('playAgainBtn');
    const overlay = document.getElementById('overlay');
    const recordList = document.getElementById('recordList');
    const menuRecordList = document.getElementById('menuRecordList');

    difficultyBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            difficultyBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            difficulty = btn.dataset.difficulty;
            size = difficulty === 'easy' ? 3 : difficulty === 'medium' ? 4 : 5;
        });
    });

    colorPicker.addEventListener('input', (e) => {
        selectedColor = e.target.value;
    });

    startBtn.addEventListener('click', startGame);
    resetBtn.addEventListener('click', resetGame);
    menuBtn.addEventListener('click', showMenu);
    playAgainBtn.addEventListener('click', () => {
        winMessage.classList.remove('show');
        overlay.classList.remove('show');
        resetGame();
    });

    function startGame() {
        menu.style.display = 'none';
        gameScreen.style.display = 'block';
        initGame();
    }

    function showMenu() {
        gameScreen.style.display = 'none';
        menu.style.display = 'flex';
        stopTimer();
        displayRecords(menuRecordList);
    }

    function initGame() {
        moves = 0;
        seconds = 0;
        movesEl.textContent = '0';
        timerEl.textContent = '00:00';
        
        board.style.gridTemplateColumns = `repeat(${size}, 1fr)`;
        
        const totalTiles = size * size;
        tiles = Array.from({length: totalTiles - 1}, (_, i) => i + 1);
        tiles.push(0);
        emptyIndex = totalTiles - 1;
        
        shuffleTiles();
        renderBoard();
        startTimer();
        displayRecords(recordList);
    }

    function shuffleTiles() {
        for (let i = 0; i < 1000; i++) {
            const neighbors = getNeighbors(emptyIndex);
            const randomNeighbor = neighbors[Math.floor(Math.random() * neighbors.length)];
            swapTiles(emptyIndex, randomNeighbor);
        }
    }

    function getNeighbors(index) {
        const neighbors = [];
        const row = Math.floor(index / size);
        const col = index % size;
        
        if (row > 0) neighbors.push(index - size);
        if (row < size - 1) neighbors.push(index + size);
        if (col > 0) neighbors.push(index - 1);
        if (col < size - 1) neighbors.push(index + 1);
        
        return neighbors;
    }

    function swapTiles(index1, index2) {
        [tiles[index1], tiles[index2]] = [tiles[index2], tiles[index1]];
        if (tiles[index1] === 0) emptyIndex = index1;
        if (tiles[index2] === 0) emptyIndex = index2;
    }

    function renderBoard() {
        board.innerHTML = '';
        const fontSize = size === 3 ? '24px' : size === 4 ? '20px' : '16px';
        
        tiles.forEach((tile, index) => {
            const tileEl = document.createElement('div');
            tileEl.className = 'tile';
            
            if (tile === 0) {
                tileEl.classList.add('empty');
            } else {
                tileEl.textContent = tile;
                tileEl.style.color = selectedColor;
                tileEl.style.fontSize = fontSize;
                tileEl.addEventListener('click', () => moveTile(index));
            }
            
            board.appendChild(tileEl);
        });
    }

    function moveTile(index) {
        const neighbors = getNeighbors(emptyIndex);
        
        if (neighbors.includes(index)) {
            swapTiles(index, emptyIndex);
            moves++;
            movesEl.textContent = moves;
            renderBoard();
            
            if (checkWin()) {
                stopTimer();
                showWinMessage();
            }
        }
    }

    function checkWin() {
        for (let i = 0; i < tiles.length - 1; i++) {
            if (tiles[i] !== i + 1) return false;
        }
        return tiles[tiles.length - 1] === 0;
    }

    function startTimer() {
        stopTimer();
        timerInterval = setInterval(() => {
            seconds++;
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            timerEl.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }, 1000);
    }

    function stopTimer() {
        if (timerInterval) {
            clearInterval(timerInterval);
            timerInterval = null;
        }
    }

    function resetGame() {
        stopTimer();
        initGame();
    }

    function showWinMessage() {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        const timeStr = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        
        winText.textContent = `Voc√™ completou em ${timeStr} com ${moves} movimentos!`;
        winMessage.classList.add('show');
        overlay.classList.add('show');
        
        saveRecord(timeStr, moves);
        displayRecords(recordList);
    }

    function saveRecord(time, moves) {
        const records = JSON.parse(localStorage.getItem('rachaChucaRecords') || '[]');
        const record = {
            time,
            moves,
            difficulty,
            date: new Date().toLocaleString('pt-BR')
        };
        
        records.unshift(record);
        
        if (records.length > 10) {
            records.pop();
        }
        
        localStorage.setItem('rachaChucaRecords', JSON.stringify(records));
    }

    function displayRecords(container) {
        const records = JSON.parse(localStorage.getItem('rachaChucaRecords') || '[]');
        
        if (records.length === 0) {
            container.innerHTML = '<div style="text-align: center; color: #999; padding: 20px;">Nenhum recorde ainda</div>';
            return;
        }
        
        container.innerHTML = records.slice(0, 5).map(record => `
            <div class="record-item">
                <span>${record.difficulty === 'easy' ? '3x3' : record.difficulty === 'medium' ? '4x4' : '5x5'} - ${record.moves} movimentos</span>
                <span class="record-time">${record.time}</span>
            </div>
        `).join('');
    }

    displayRecords(menuRecordList);
</script>


</body>
</html>
