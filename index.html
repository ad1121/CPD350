<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Racha Cuca</title>
    <style>
        /* Estilos globais */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #fff; /* Fundo branco */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 0;
        }

        .container {
            width: 100%;
            max-width: 1000px;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .menu, .game-screen {
            display: flex;
            flex-direction: column;
            gap: 15px;
            justify-content: center;
            align-items: center;
        }

        /* Tabuleiro */
        .board {
            display: grid;
            gap: 8px;
            background: #e0e0e0;
            padding: 20px;
            border-radius: 15px;
            box-shadow: inset 0 4px 8px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 500px;
        }

        .tile {
            aspect-ratio: 1;
            background: white;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            user-select: none;
        }

        .tile:hover {
            transform: scale(0.95);
        }

        .tile.empty {
            background: transparent;
            box-shadow: none;
            cursor: default;
        }

        /* Bot√µes */
        .start-btn, .reset-btn, .menu-btn {
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .start-btn:hover, .reset-btn:hover, .menu-btn:hover {
            transform: scale(1.05);
        }

        .difficulty-btn {
            padding: 12px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .difficulty-btn.active {
            background: #667eea;
            color: white;
        }

        .difficulty-btn:hover {
            background: #667eea;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÆ RACHA CUCA</h1>

        <div class="menu" id="menu">
            <div class="difficulty-group">
                <label>Escolha a Dificuldade:</label>
                <div class="difficulty-buttons">
                    <button class="difficulty-btn active" data-difficulty="easy">F√°cil (3x3)</button>
                    <button class="difficulty-btn" data-difficulty="medium">M√©dio (4x4)</button>
                    <button class="difficulty-btn" data-difficulty="hard">Dif√≠cil (5x5)</button>
                </div>
            </div>

            <div class="color-picker-group">
                <label>Escolha a Cor dos N√∫meros:</label>
                <input type="color" class="color-input" id="colorPicker" value="#667eea">
            </div>

            <button class="start-btn" id="startBtn">‚ñ∂Ô∏è JOGAR</button>
        </div>

        <div class="game-screen" id="gameScreen">
            <div class="game-info">
                <div>Movimentos: <span id="moves">0</span></div>
                <div>Tempo: <span id="timer">00:00</span></div>
            </div>

            <div class="board" id="board"></div>

            <div class="game-buttons">
                <button class="reset-btn" id="resetBtn">üîÑ Reiniciar</button>
                <button class="menu-btn" id="menuBtn">üè† Menu</button>
            </div>
        </div>
    </div>

    <script>
        let size = 3;
        let tiles = [];
        let emptyIndex = 0;
        let moves = 0;
        let seconds = 0;
        let timerInterval = null;
        let selectedColor = '#667eea';

        const board = document.getElementById('board');
        const movesEl = document.getElementById('moves');
        const timerEl = document.getElementById('timer');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const menuBtn = document.getElementById('menuBtn');
        const menu = document.getElementById('menu');
        const gameScreen = document.getElementById('gameScreen');

        startBtn.addEventListener('click', startGame);
        resetBtn.addEventListener('click', resetGame);
        menuBtn.addEventListener('click', showMenu);

        function startGame() {
            menu.style.display = 'none';
            gameScreen.style.display = 'flex';
            initGame();
        }

        function showMenu() {
            gameScreen.style.display = 'none';
            menu.style.display = 'flex';
            stopTimer();
        }

        function initGame() {
            moves = 0;
            seconds = 0;
            movesEl.textContent = '0';
            timerEl.textContent = '00:00';
            board.style.gridTemplateColumns = `repeat(${size}, 1fr)`;
            
            const totalTiles = size * size;
            tiles = Array.from({length: totalTiles - 1}, (_, i) => i + 1);
            tiles.push(0);
            emptyIndex = totalTiles - 1;
            
            shuffleTiles();
            renderBoard();
            startTimer();
        }

        function shuffleTiles() {
            for (let i = 0; i < 1000; i++) {
                const neighbors = getNeighbors(emptyIndex);
                const randomNeighbor = neighbors[Math.floor(Math.random() * neighbors.length)];
                swapTiles(emptyIndex, randomNeighbor);
            }
        }

        function getNeighbors(index) {
            const neighbors = [];
            const row = Math.floor(index / size);
            const col = index % size;

            if (row > 0) neighbors.push(index - size);
            if (row < size - 1) neighbors.push(index + size);
            if (col > 0) neighbors.push(index - 1);
            if (col < size - 1) neighbors.push(index + 1);

            return neighbors;
        }

        function swapTiles(index1, index2) {
            [tiles[index1], tiles[index2]] = [tiles[index2], tiles[index1]];
            if (tiles[index1] === 0) emptyIndex = index1;
            if (tiles[index2] === 0) emptyIndex = index2;
        }

        function renderBoard() {
            board.innerHTML = '';
            tiles.forEach((tile, index) => {
                const tileEl = document.createElement('div');
                tileEl.className = 'tile';
                if (tile === 0) {
                    tileEl.classList.add('empty');
                } else {
                    tileEl.textContent = tile;
                    tileEl.style.color = selectedColor;
                    tileEl.addEventListener('click', () => moveTile(index));
                }
                board.appendChild(tileEl);
            });
        }

        function moveTile(index) {
            const neighbors = getNeighbors(emptyIndex);
            if (neighbors.includes(index)) {
                swapTiles(index, emptyIndex);
                moves++;
                movesEl.textContent = moves;
                renderBoard();
            }
        }

        function startTimer() {
            stopTimer();
            timerInterval = setInterval(() => {
                seconds++;
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                timerEl.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        function resetGame() {
            stopTimer();
            initGame();
        }
    </script>
</body>
</html>
